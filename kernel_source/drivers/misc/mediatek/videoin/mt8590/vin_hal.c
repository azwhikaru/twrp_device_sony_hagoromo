/*
* Copyright (C) 2011-2015 MediaTek Inc.
*
* This program is free software: you can redistribute it and/or modify it under the terms of the
* GNU General Public License version 2 as published by the Free Software Foundation.
*
* This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; 
* without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
* See the GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License along with this program.
* If not, see <http://www.gnu.org/licenses/>.
*/
#include <linux/err.h>
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/slab.h>
#include <linux/clk.h>
#include <linux/io.h>
#include <linux/interrupt.h>
#include <asm/irq.h>
#include <linux/sched.h>
#include <linux/timer.h>
#include <linux/input.h>
#include <linux/irq.h>
#include <linux/delay.h>
#include <asm/irq.h>
#include <asm/memory.h>
#include <mach/mt_clkmgr.h>
#include <mach/mt_spm_mtcmos.h>

#include <linux/jiffies.h>
#include "hdmirx.h"
#include "vin_hw.h"
#include "vin_hal.h"
#include "dgi_hw.h"

#define TOTAL_PIXEL_480I     1716
#define TOTAL_PIXEL_576I     1728
#define TOTAL_PIXEL_480P     858
#define TOTAL_PIXEL_576P     864
#define TOTAL_PIXEL_720P60   1650
#define TOTAL_PIXEL_720P50   1980
#define TOTAL_PIXEL_720P30   3300
#define TOTAL_PIXEL_720P25   3960
#define TOTAL_PIXEL_720P24   3300
#define TOTAL_PIXEL_1080I60  2200
#define TOTAL_PIXEL_1080I50  2640
#define TOTAL_PIXEL_1080P60  2200
#define TOTAL_PIXEL_1080P50  2640
#define TOTAL_PIXEL_1080P24  2750
#define TOTAL_PIXEL_1080P25  2640
#define TOTAL_PIXEL_1080P30  2200
#define TOTAL_PIXEL_2160P24  5500
#define TOTAL_PIXEL_2160P50  5280
#define TOTAL_PIXEL_2160P60  4400
#define TOTAL_PIXEL_2161P50  5280
#define TOTAL_PIXEL_2161P60  4400



#define ACTIVE_PIXEL_480I     720
#define ACTIVE_PIXEL_576I     720
#define ACTIVE_PIXEL_480P     720
#define ACTIVE_PIXEL_576P     720
#define ACTIVE_PIXEL_720P60   1280
#define ACTIVE_PIXEL_720P50   1280
#define ACTIVE_PIXEL_720P30   1280
#define ACTIVE_PIXEL_720P25   1280
#define ACTIVE_PIXEL_720P24   1280
#define ACTIVE_PIXEL_1080I60  1920
#define ACTIVE_PIXEL_1080I50  1920
#define ACTIVE_PIXEL_1080P60  1920
#define ACTIVE_PIXEL_1080P50  1920
#define ACTIVE_PIXEL_1080P24  1920

#define ACTIVE_PIXEL_2160P24  3840
#define ACTIVE_PIXEL_2160P50  3840
#define ACTIVE_PIXEL_2160P50  3840
#define ACTIVE_PIXEL_2160P60  3840
#define ACTIVE_PIXEL_2161P50  4096
#define ACTIVE_PIXEL_2161P60  4096

#define ACTIVE_PIXEL_720P   1280
#define ACTIVE_PIXEL_1080  1920

#define TOTAL_LINE_480I     525
#define TOTAL_LINE_576I     625
#define TOTAL_LINE_480P     525
#define TOTAL_LINE_576P     625
#define TOTAL_LINE_720P60   750
#define TOTAL_LINE_720P50   750
#define TOTAL_LINE_1080I60  1125
#define TOTAL_LINE_1080I50  1125
#define TOTAL_LINE_1080P60  1125
#define TOTAL_LINE_1080P50  1125
#define TOTAL_LINE_1080P24  1125
#define TOTAL_LINE_4K_2K  2250
#define TOTAL_LINE_2160P50  2250
#define TOTAL_LINE_2160P60  2250
#define TOTAL_LINE_2161P50  2250
#define TOTAL_LINE_2161P60  2250


#define ACTIVE_LINE_480I     240
#define ACTIVE_LINE_576I     288
#define ACTIVE_LINE_480P     480
#define ACTIVE_LINE_576P     576
#define ACTIVE_LINE_720P60   720
#define ACTIVE_LINE_720P50   720
#define ACTIVE_LINE_1080I60  540
#define ACTIVE_LINE_1080I50  540
#define ACTIVE_LINE_1080P60  1080
#define ACTIVE_LINE_1080P50  1080
#define ACTIVE_LINE_1080P24  1080
#define ACTIVE_LINE_3D_1080I  1103 //1080+23
#define ACTIVE_LINE_4K_2K  2160
#define TOTAL_LINE_2160P50  2160
#define TOTAL_LINE_2160P60  2160
#define TOTAL_LINE_2161P50  2160
#define TOTAL_LINE_2161P60  2160


static UINT16 _u2aHDelay[RES_MODE_NUM] = 
{   
    0x00ED,  //RES_480I=0,     3A20[13:12] = 1;
    0x0107,  //RES_576I, //1   3A20[13:12] = 0;
    0x0079,  //RES_480P, //2   3A20[13:12] = 1;
    0x0083,  //RES_576P, //3   3A20[13:12] = 1;
    0x0079,  //RES_480P_1440,//4   3A20[13:12] = 1;
    0x0083,  //RES_576P_1440,//5   3A20[13:12] = 1;
    0x0079,  //RES_480P_2880,//6   3A20[13:12] = 1;
    0x0083,  //RES_576P_2880,//7       3A20[13:12] = 1;
    0x0103,  //RES_720P60HZ,//8     3A20[13:12] = 1;
    0x0103,  //RES_720P50HZ,//9     3A20[13:12] = 1;
    0x00BF,  //RES_1080I60HZ,//10    3A20[13:12] = 1;  
    0x00BF,  //RES_1080I50HZ,//11    3A20[13:12] = 1;
    0x00BF,  //RES_1080P60HZ,//12    3A20[13:12] = 1;
    0x00BF,  //RES_1080P50HZ,//13    3A20[13:12] = 1;
    0x00BF,  //RES_1080P30HZ,//14    3A20[13:12] = 1;
    0x00BF,  //RES_1080P25HZ, //15    3A20[13:12] = 1;
    0x00ED,  //RES_480I_2880,//16    3A20[13:12] = 1;
    0x0107,  //RES_576I_2880,//17    3A20[13:12] = 1;
    0x00BF,  //RES_1080P24HZ, //18    3A20[13:12] = 1;
    0x00BF,  //RES_1080P23_976HZ, //19, 1080P23.976hz    3A20[13:12] = 1;
    0x00BF,  //RES_1080P29_97HZ, //20, 1080P29.97hz    3A20[13:12] = 1;
    0x00BB,  //RES_3D_1080P23HZ, //21, 1080p47.952Hz     3A20[13:12] = 1;
    0x00BB,  //RES_3D_1080P24HZ, //22, 1080p48hz    3A20[13:12] = 1;
    0x00FF,  //RES_3D_720P60HZ, //23, 720p120hz    3A20[13:12] = 1;
    0x00FF,  //RES_3D_720P50HZ, //24, 720p100hz    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P30HZ, //25, 720p120hz    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P25HZ, //26, 720p100hz    3A20[13:12] = 1;
    0x0084,  //RES_3D_576P50HZ, //27, 576p100hz
    0x007A,  //RES_3D_480P60HZ, //28, 480p120hz
    0x00BB,  //RES_3D_1080I60HZ, //29, 1080i120hz
    0x00BB,  //RES_3D_1080I50HZ, //30, 1080i100hz
    0x00BB,  //RES_3D_1080I30HZ, //31, 1080i120hz
    0x00BB,  //RES_3D_1080I25HZ, //32, 1080i100hz
    0x0108,  //RES_3D_576I25HZ, //33, 576i100hz
    0x00EE,  //RES_3D_480I30HZ, //34, 480i120hz
    0x0108,  //RES_3D_576I50HZ, //35, 576i100hz
    0x00EE,  //RES_3D_480I60HZ, //36, 480i120hz
    0x00ED,  //RES_2D_480I60HZ, //37, 480i60hz    3A20[13:12] = 1;
    0x0107,  //RES_2D_576I50HZ, //38, 576i50hz    3A20[13:12] = 0;
    0x002F,  //RES_2D_640x480HZ,//39
    0x0000,  //RES_PANEL_AUO_B089AW01, //Total: 1344x625, Act: 1024x600, Frm: 60Hz, Clk: 50.4MHz
    0x0103,  //RES_3D_720P60HZ_TB,  //41     3A20[13:12] = 1;
    0x0103,  //RES_3D_720P50HZ_TB,  //42    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080I60HZ_SBS_HALF,//43    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080I50HZ_SBS_HALF,//44    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P23HZ_TB, //45    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P24HZ_TB,//46    3A20[13:12] = 1;
    0x017F,  //RES_4K2K23976HZ, //47
    0x017F,  //RES_4K2K24HZ, //48
    0x017F,  //RES_4K2K23976HZ, //47
    0x017F,  //RES_4K2K24HZ, //48
    0x017F,  //RES_2160P,//49
    0x017F,  //RES_2160P_4096, //50
    0x0103,  //RES_720P30HZ, // 51
    0x0103,  //RES_720P25HZ, // 52
    0x0103,  //RES_720P24HZ, // 53
    0x0103,  //RES_720P23HZ, // 54
    0x00BB,  //RES_3D_1080P60HZ,// 55
    0x00BB,  //RES_3D_1080P50HZ,//56
    0x00BB,  //RES_3D_1080P30HZ,//57
    0x00BB,  //RES_3D_1080P29HZ,//58
    0x00BB,  //RES_3D_1080P25HZ,//59
    0x0103,  //RES_3D_720P24HZ, //60
    0x0103,  //RES_3D_720P23HZ, //61
    0x00BF,  //RES_3D_1080P60HZ_TB, //62    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P50HZ_TB, //63    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P30HZ_TB, //64    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P29HZ_TB,//65    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P25HZ_TB, //66    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080I60HZ_TB, //67    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080I50HZ_TB,//68    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080I30HZ_TB,//69    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080I25HZ_TB,//70    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P30HZ_TB,//71    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P25HZ_TB,//72    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P24HZ_TB,//73    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P23HZ_TB,//74    3A20[13:12] = 1;
    0x0083,  //RES_3D_576P50HZ_TB,//75    3A20[13:12] = 1;
    0x0107,  //RES_3D_576I25HZ_TB,//76    3A20[13:12] = 0;
    0x0107,  //RES_3D_576I50HZ_TB,//77    3A20[13:12] = 0;
    0x0079,  //RES_3D_480P60HZ_TB,//78    3A20[13:12] = 1;
    0x00ED,  //RES_3D_480I30HZ_TB,//79    3A20[13:12] = 1;
    0x00ED,  //RES_3D_480I60HZ_TB,//80    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P60HZ_SBS_HALF,//81    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P50HZ_SBS_HALF,//82    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P30HZ_SBS_HALF,//83    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P29HZ_SBS_HALF,//84    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P25HZ_SBS_HALF,//85    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P24HZ_SBS_HALF,//86    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080P23HZ_SBS_HALF,//87    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080I30HZ_SBS_HALF,//88    3A20[13:12] = 1;
    0x00BF,  //RES_3D_1080I25HZ_SBS_HALF,//89    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P60HZ_SBS_HALF,//90    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P50HZ_SBS_HALF,//91    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P30HZ_SBS_HALF,//92    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P25HZ_SBS_HALF,//93    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P24HZ_SBS_HALF,//94    3A20[13:12] = 1;
    0x0103,  //RES_3D_720P23HZ_SBS_HALF,//95    3A20[13:12] = 1;
    0x0083,  //RES_3D_576P50HZ_SBS_HALF,//96    3A20[13:12] = 1;
    0x0107,  //RES_3D_576I25HZ_SBS_HALF,//97    3A20[13:12] = 0;
    0x0107,  //RES_3D_576I50HZ_SBS_HALF,//98    3A20[13:12] = 0;
    0x0079,  //RES_3D_480P60HZ_SBS_HALF,//99    3A20[13:12] = 1;
    0x00ED,  //RES_3D_480I30HZ_SBS_HALF,//100    3A20[13:12] = 1;
    0x00ED    //RES_3D_480I60HZ_SBS_HALF,//101    3A20[13:12] = 1;
};

static  UINT16 _u2aVDelay[RES_MODE_NUM][2] =  
{   // Top, Btn
    {0x0012, 0x0013},  //RES_480I=0, 
    {0x0016, 0x0017},  //RES_576I, //1
    {0x0024, 0x0024},  //RES_480P, //2
    {0x002C, 0x002C},  //RES_576P, //3
    {0x0024, 0x0024},  //RES_480P_1440,//4
    {0x002C, 0x002C},  //RES_576P_1440,//5
    {0x0024, 0x0024},  //RES_480P_2880,//6
    {0x002C, 0x002C},  //RES_576P_2880,//7    
    {0x0019, 0x0019},  //RES_720P60HZ,//8
    {0x0019, 0x0019},  //RES_720P50HZ,//9
    {0x0015, 0x0014},  //RES_1080I60HZ,//10
    {0x0015, 0x0014},  //RES_1080I50HZ,//11
    {0x0029, 0x0029},  //RES_1080P60HZ,//12
    {0x0029, 0x0029},  //RES_1080P50HZ,//13
    {0x0029, 0x0029},  //RES_1080P30HZ,//14
    {0x0029, 0x0029},  //RES_1080P25HZ, //15
    {0x0012, 0x0013},  //RES_480I_2880,//16
    {0x0016, 0x0017},  //RES_576I_2880,//17
    {0x0029, 0x0029},  //RES_1080P24HZ, //18
    {0x0029, 0x0029},  //RES_1080P23_976HZ, //19, 1080P23.976hz
    {0x0029, 0x0029},  //RES_1080P29_97HZ, //20, 1080P29.97hz
    {0x0029, 0x0029},  //RES_3D_1080P23HZ, //21, 1080p47.952Hz
    {0x0029, 0x0029},  //RES_3D_1080P24HZ, //22, 1080p48hz
    {0x0019, 0x0019},  //RES_3D_720P60HZ, //23, 720p120hz
    {0x0019, 0x0019},  //RES_3D_720P50HZ, //24, 720p100hz
    {0x0019, 0x0019},  //RES_3D_720P30HZ, //25, 720p120hz
    {0x0019, 0x0019},  //RES_3D_720P25HZ, //26, 720p100hz
    {0x002C, 0x002C},  //RES_3D_576P50HZ, //27, 576p100hz
    {0x0024, 0x0024},  //RES_3D_480P60HZ, //28, 480p120hz
    {0x0014, 0x0014},  //RES_3D_1080I60HZ, //29, 1080i120hz
    {0x0014, 0x0014},  //RES_3D_1080I50HZ, //30, 1080i100hz
    {0x0014, 0x0014},  //RES_3D_1080I30HZ, //31, 1080i120hz
    {0x0014, 0x0014},  //RES_3D_1080I25HZ, //32, 1080i100hz
    {0x0016, 0x0017},  //RES_3D_576I25HZ, //33, 576i100hz
    {0x0012, 0x0013},  //RES_3D_480I30HZ, //34, 480i120hz
    {0x0016, 0x0017},  //RES_3D_576I50HZ, //35, 576i100hz
    {0x0012, 0x0013},  //RES_3D_480I60HZ, //36, 480i120hz
    {0x0012, 0x0013},  //RES_2D_480I60HZ, //37, 480i60hz
    {0x0016, 0x0017},  //RES_2D_576I50HZ, //38, 576i50hz
    {0x0022, 0x0022},  //RES_2D_640x480HZ,//39
    {0x0000, 0x0000},  //RES_PANEL_AUO_B089AW01, //Total: 1344x625, Act: 1024x600, Frm: 60Hz, Clk: 50.4MHz    
    {0x0019, 0x0019},  //RES_3D_720P60HZ_TB,  //41
    {0x0019, 0x0019},  //RES_3D_720P50HZ_TB,  //42
    {0x0015, 0x0014},  //RES_3D_1080I60HZ_SBS_HALF,//43
    {0x0015, 0x0014},  //RES_3D_1080I50HZ_SBS_HALF,//44
    {0x0029, 0x0029},  //RES_3D_1080P23HZ_TB, //45
    {0x0029, 0x0029},  //RES_3D_1080P24HZ_TB,//46
    {0x0000, 0x0000},  //RES_4K2K23976HZ, //47
    {0x0000, 0x0000},  //RES_4K2K24HZ, //48
    {0x0000, 0x0000},  //RES_4K2K23976HZ, //47
    {0x0000, 0x0000},  //RES_4K2K24HZ, //48
    {0x0000, 0x0000},  //RES_2160P,//49
    {0x0000, 0x0000},  //RES_2160P_4096, //50
    {0x0019, 0x0019},  //RES_720P30HZ, // 51
    {0x0019, 0x0019},  //RES_720P25HZ, // 52
    {0x0019, 0x0019},  //RES_720P24HZ, // 53
    {0x0019, 0x0019},  //RES_720P23HZ, // 54
    {0x0029, 0x0029},  //RES_3D_1080P60HZ,// 55
    {0x0029, 0x0029},  //RES_3D_1080P50HZ,//56
    {0x0029, 0x0029},  //RES_3D_1080P30HZ,//57
    {0x0029, 0x0029},  //RES_3D_1080P29HZ,//58
    {0x0029, 0x0029},  //RES_3D_1080P25HZ,//59
    {0x0019, 0x0019},  //RES_3D_720P24HZ, //60
    {0x0019, 0x0019},  //RES_3D_720P23HZ, //61
    {0x0029, 0x0029},  //RES_3D_1080P60HZ_TB, //62
    {0x0029, 0x0029},  //RES_3D_1080P50HZ_TB, //63
    {0x0029, 0x0029},  //RES_3D_1080P30HZ_TB, //64
    {0x0029, 0x0029},  //RES_3D_1080P29HZ_TB,//65
    {0x0029, 0x0029},  //RES_3D_1080P25HZ_TB, //66
    {0x0015, 0x0014},  //RES_3D_1080I60HZ_TB, //67
    {0x0015, 0x0014},  //RES_3D_1080I50HZ_TB,//68
    {0x0015, 0x0014},  //RES_3D_1080I30HZ_TB,//69
    {0x0015, 0x0014},  //RES_3D_1080I25HZ_TB,//70
    {0x0019, 0x0019},  //RES_3D_720P30HZ_TB,//71
    {0x0019, 0x0019},  //RES_3D_720P25HZ_TB,//72
    {0x0019, 0x0019},  //RES_3D_720P24HZ_TB,//73
    {0x0019, 0x0019},  //RES_3D_720P23HZ_TB,//74
    {0x002c, 0x002c},  //RES_3D_576P50HZ_TB,//75
    {0x0016, 0x0017},  //RES_3D_576I25HZ_TB,//76
    {0x0016, 0x0017},  //RES_3D_576I50HZ_TB,//77
    {0x0024, 0x0024},  //RES_3D_480P60HZ_TB,//78
    {0x0012, 0x0013},  //RES_3D_480I30HZ_TB,//79
    {0x0012, 0x0013},  //RES_3D_480I60HZ_TB,//80
    {0x0029, 0x0029},  //RES_3D_1080P60HZ_SBS_HALF,//81
    {0x0029, 0x0029},  //RES_3D_1080P50HZ_SBS_HALF,//82
    {0x0029, 0x0029},  //RES_3D_1080P30HZ_SBS_HALF,//83
    {0x0029, 0x0029},  //RES_3D_1080P29HZ_SBS_HALF,//84
    {0x0029, 0x0029},  //RES_3D_1080P25HZ_SBS_HALF,//85
    {0x0029, 0x0029},  //RES_3D_1080P24HZ_SBS_HALF,//86
    {0x0029, 0x0029},  //RES_3D_1080P23HZ_SBS_HALF,//87
    {0x0015, 0x0014},  //RES_3D_1080I30HZ_SBS_HALF,//88
    {0x0015, 0x0014},  //RES_3D_1080I25HZ_SBS_HALF,//89
    {0x0019, 0x0019},  //RES_3D_720P60HZ_SBS_HALF,//90
    {0x0019, 0x0019},  //RES_3D_720P50HZ_SBS_HALF,//91
    {0x0019, 0x0019},  //RES_3D_720P30HZ_SBS_HALF,//92
    {0x0019, 0x0019},  //RES_3D_720P25HZ_SBS_HALF,//93
    {0x0019, 0x0019},  //RES_3D_720P24HZ_SBS_HALF,//94
    {0x0019, 0x0019},  //RES_3D_720P23HZ_SBS_HALF,//95
    {0x002c, 0x002c},  //RES_3D_576P50HZ_SBS_HALF,//96
    {0x0016, 0x0017},  //RES_3D_576I25HZ_SBS_HALF,//97
    {0x0016, 0x0017},  //RES_3D_576I50HZ_SBS_HALF,//98
    {0x0024, 0x0024},  //RES_3D_480P60HZ_SBS_HALF,//99
    {0x0012, 0x0013},  //RES_3D_480I30HZ_SBS_HALF,//100
    {0x0012, 0x0013}  //RES_3D_480I60HZ_SBS_HALF,//101    
};

static UINT16 _u2aHDramSize[RES_MODE_NUM] = 
{   
	((ACTIVE_PIXEL_480I << 3) >> 7), //RES_480I=0,                           
	((ACTIVE_PIXEL_576I << 3) >> 7), //RES_576I, //1                         
	((ACTIVE_PIXEL_480P << 3) >> 7), //RES_480P, //2                         
	((ACTIVE_PIXEL_576P << 3) >> 7), //RES_576P, //3                         
	((ACTIVE_PIXEL_480P << 3) >> 7), //RES_480P_1440,//4                     
	((ACTIVE_PIXEL_576P << 3) >> 7), //RES_576P_1440,//5                     
	((ACTIVE_PIXEL_480P << 3) >> 7), //RES_480P_2880,//6                     
	((ACTIVE_PIXEL_576P << 3) >> 7), //RES_576P_2880,//7                     
	((ACTIVE_PIXEL_720P60 << 3) >> 7), //RES_720P60HZ,//8                      
	((ACTIVE_PIXEL_720P50 << 3) >> 7), //RES_720P50HZ,//9                      
	((ACTIVE_PIXEL_1080I60 << 3) >> 7), //RES_1080I60HZ,//10                    
	((ACTIVE_PIXEL_1080I50 << 3) >> 7), //RES_1080I50HZ,//11                    
	((ACTIVE_PIXEL_1080P60 << 3) >> 7), //RES_1080P60HZ,//12                    
	((ACTIVE_PIXEL_1080P50 << 3) >> 7), //RES_1080P50HZ,//13                    
	((ACTIVE_PIXEL_1080P60 << 3) >> 7), //RES_1080P30HZ,//14                    
	((ACTIVE_PIXEL_1080P60 << 3) >> 7), //RES_1080P25HZ, //15                   
	((ACTIVE_PIXEL_480I << 3) >> 7), //RES_480I_2880,//16                    
	((ACTIVE_PIXEL_576I << 3) >> 7), //RES_576I_2880,//17                    
	((ACTIVE_PIXEL_1080P24 << 3) >> 7), //RES_1080P24HZ, //18                   
	((ACTIVE_PIXEL_1080P24 << 3) >> 7), //RES_1080P23_976HZ, //19, 1080P23.976hz
	((ACTIVE_PIXEL_1080P24 << 3) >> 7), //RES_1080P29_97HZ, //20, 1080P29.97hz  
    ((ACTIVE_PIXEL_1080P24 << 3) >> 7),  //RES_3D_1080P23HZ, //21, 1080p47.952Hz
    ((ACTIVE_PIXEL_1080P24 << 3) >> 7),  //RES_3D_1080P24HZ, //22, 1080p48hz
    ((ACTIVE_PIXEL_720P60 << 3) >> 7),  //RES_3D_720P60HZ, //23, 720p120hz
    ((ACTIVE_PIXEL_720P50 << 3) >> 7),  //RES_3D_720P50HZ, //24, 720p100hz
    ((ACTIVE_PIXEL_720P60 << 3) >> 7),  //RES_3D_720P30HZ, //25, 720p120hz
    ((ACTIVE_PIXEL_720P50 << 3) >> 7),  //RES_3D_720P25HZ, //26, 720p100hz
    ((ACTIVE_PIXEL_576P << 3) >> 7),  //RES_3D_576P50HZ, //27, 576p100hz
    ((ACTIVE_PIXEL_480P << 3) >> 7),  //RES_3D_480P60HZ, //28, 480p120hz
    ((ACTIVE_PIXEL_1080I60 << 3) >> 7),  //RES_3D_1080I60HZ, //29, 1080i120hz
    ((ACTIVE_PIXEL_1080I50 << 3) >> 7),  //RES_3D_1080I50HZ, //30, 1080i100hz
    ((ACTIVE_PIXEL_1080I60 << 3) >> 7),  //RES_3D_1080I30HZ, //31, 1080i120hz
    ((ACTIVE_PIXEL_1080I50 << 3) >> 7),  //RES_3D_1080I25HZ, //32, 1080i100hz
    ((ACTIVE_PIXEL_576I << 3) >> 7),  //RES_3D_576I25HZ, //33, 576i100hz
    ((ACTIVE_PIXEL_480I << 3) >> 7),  //RES_3D_480I30HZ, //34, 480i120hz
    ((ACTIVE_PIXEL_576I << 3) >> 7),  //RES_3D_576I50HZ, //35, 576i100hz
    ((ACTIVE_PIXEL_480I << 3) >> 7),  //RES_3D_480I60HZ, //36, 480i120hz
    ((ACTIVE_PIXEL_480I << 3) >> 7),  //RES_2D_480I60HZ, //37, 480i60hz
    ((ACTIVE_PIXEL_576I << 3) >> 7),  //RES_2D_576I50HZ, //38, 576i50hz
    ((640 << 3) >> 7),  //RES_2D_640x480HZ,//39
    ((1024 << 3) >> 7),  //RES_PANEL_AUO_B089AW01, //Total: 1344x625, Act: 1024x600, Frm: 60Hz, Clk: 50.4MHz    
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P60HZ_TB,  //41
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P50HZ_TB,  //42
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080I60HZ_SBS_HALF,//43
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080I50HZ_SBS_HALF,//44
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P23HZ_TB, //45
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P24HZ_TB,//46
    ((3840 << 3) >> 7),  //RES_4K2K23976HZ, //47
    ((3840 << 3) >> 7),  //RES_4K2K24HZ, //48
        ((3840 << 3) >> 7),  //RES_4K2K23976HZ, //47
    ((3840 << 3) >> 7),  //RES_4K2K24HZ, //48
    ((3840 << 3) >> 7),  //RES_2160P,//49
    ((4096 << 3) >> 7),  //RES_2160P_4096, //50
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_720P30HZ, // 51
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_720P25HZ, // 52
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_720P24HZ, // 53
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_720P23HZ, // 54
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P60HZ,// 55
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P50HZ,//56
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P30HZ,//57
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P29HZ,//58
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P25HZ,//59
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P24HZ, //60
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P23HZ, //61
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P60HZ_TB, //62
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P50HZ_TB, //63
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P30HZ_TB, //64
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P29HZ_TB,//65
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P25HZ_TB, //66
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080I60HZ_TB, //67
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080I50HZ_TB,//68
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080I30HZ_TB,//69
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080I25HZ_TB,//70
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P30HZ_TB,//71
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P25HZ_TB,//72
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P24HZ_TB,//73
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P23HZ_TB,//74
    ((ACTIVE_PIXEL_576P << 3) >> 7),  //RES_3D_576P50HZ_TB,//75
    ((ACTIVE_PIXEL_576I << 3) >> 7),  //RES_3D_576I25HZ_TB,//76
    ((ACTIVE_PIXEL_576I << 3) >> 7),  //RES_3D_576I50HZ_TB,//77
    ((ACTIVE_PIXEL_480P << 3) >> 7),  //RES_3D_480P60HZ_TB,//78
    ((ACTIVE_PIXEL_480I << 3) >> 7),  //RES_3D_480I30HZ_TB,//79
    ((ACTIVE_PIXEL_480I << 3) >> 7),  //RES_3D_480I60HZ_TB,//80
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P60HZ_SBS_HALF,//81
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P50HZ_SBS_HALF,//82
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P30HZ_SBS_HALF,//83
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P29HZ_SBS_HALF,//84
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P25HZ_SBS_HALF,//85
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P24HZ_SBS_HALF,//86
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080P23HZ_SBS_HALF,//87
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080I30HZ_SBS_HALF,//88
    ((ACTIVE_PIXEL_1080 << 3) >> 7),  //RES_3D_1080I25HZ_SBS_HALF,//89
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P60HZ_SBS_HALF,//90
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P50HZ_SBS_HALF,//91
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P30HZ_SBS_HALF,//92
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P25HZ_SBS_HALF,//93
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P24HZ_SBS_HALF,//94
    ((ACTIVE_PIXEL_720P << 3) >> 7),  //RES_3D_720P23HZ_SBS_HALF,//95
    ((ACTIVE_PIXEL_576P << 3) >> 7),  //RES_3D_576P50HZ_SBS_HALF,//96
    ((ACTIVE_PIXEL_576I << 3) >> 7),  //RES_3D_576I25HZ_SBS_HALF,//97
    ((ACTIVE_PIXEL_576I << 3) >> 7),  //RES_3D_576I50HZ_SBS_HALF,//98
    ((ACTIVE_PIXEL_480P << 3) >> 7),  //RES_3D_480P60HZ_SBS_HALF,//99
    ((ACTIVE_PIXEL_480I << 3) >> 7),  //RES_3D_480I30HZ_SBS_HALF,//100
    ((ACTIVE_PIXEL_480I << 3) >> 7)  //RES_3D_480I60HZ_SBS_HALF,//101
};

static UINT16 _u2aYCLine[RES_MODE_NUM][2] = 
{   // 420, 422
	{((ACTIVE_LINE_480I >> 1) - 1)   , (ACTIVE_LINE_480I - 1)}, //RES_480I=0,                           
	{((ACTIVE_LINE_576I >> 1) - 1)   , (ACTIVE_LINE_576I - 1)}, //RES_576I, //1                         
	{((ACTIVE_LINE_480P >> 1) - 1)   , (ACTIVE_LINE_480P -1)}, //RES_480P, //2                         
	{((ACTIVE_LINE_576P >> 1) - 1)   , (ACTIVE_LINE_576P - 1)}, //RES_576P, //3                         
	{((ACTIVE_LINE_480P >> 1) - 1)   , (ACTIVE_LINE_480P - 1)}, //RES_480P_1440,//4                     
	{((ACTIVE_LINE_576P >> 1) - 1)   , (ACTIVE_LINE_576P - 1)}, //RES_576P_1440,//5                     
	{((ACTIVE_LINE_480P >> 1) - 1)   , (ACTIVE_LINE_480P - 1)}, //RES_480P_2880,//6                     
	{((ACTIVE_LINE_576P >> 1) - 1)   , (ACTIVE_LINE_576P - 1)}, //RES_576P_2880,//7                     
	{((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)}, //RES_720P60HZ,//8                      
	{((ACTIVE_LINE_720P50 >> 1) - 1) , (ACTIVE_LINE_720P50 - 1)}, //RES_720P50HZ,//9                      
	{((ACTIVE_LINE_1080I60 >> 1) - 1), (ACTIVE_LINE_1080I60 - 1)}, //RES_1080I60HZ,//10                    
	{((ACTIVE_LINE_1080I50 >> 1) - 1), (ACTIVE_LINE_1080I50 - 1)}, //RES_1080I50HZ,//11                    
	{((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_1080P60HZ,//12                    
	{((ACTIVE_LINE_1080P50 >> 1) - 1), (ACTIVE_LINE_1080P50 - 1)}, //RES_1080P50HZ,//13                    
	{((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_1080P30HZ,//14                    
	{((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_1080P25HZ, //15                   
	{((ACTIVE_LINE_480I >> 1) - 1)   , (ACTIVE_LINE_480I - 1)}, //RES_480I_2880,//16                    
	{((ACTIVE_LINE_576I >> 1) - 1)   , (ACTIVE_LINE_576I - 1)}, //RES_576I_2880,//17                    
	{((ACTIVE_LINE_1080P24 >> 1) - 1), (ACTIVE_LINE_1080P24 - 1)}, //RES_1080P24HZ, //18                   
	{((ACTIVE_LINE_1080P24 >> 1) - 1), (ACTIVE_LINE_1080P24 - 1)}, //RES_1080P23_976HZ, //19, 1080P23.976hz
	{((ACTIVE_LINE_1080P24 >> 1) - 1), (ACTIVE_LINE_1080P24 - 1)}, //RES_1080P29_97HZ, //20, 1080P29.97hz  
    {((ACTIVE_LINE_1080P24 >> 1) - 1), (ACTIVE_LINE_1080P24 - 1)},  //RES_3D_1080P23HZ, //21, 1080p47.952Hz
    {((ACTIVE_LINE_1080P24 >> 1) - 1), (ACTIVE_LINE_1080P24 - 1)},  //RES_3D_1080P24HZ, //22, 1080p48hz
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P60HZ, //23, 720p120hz
    {((ACTIVE_LINE_720P50 >> 1) - 1) , (ACTIVE_LINE_720P50 - 1)},  //RES_3D_720P50HZ, //24, 720p100hz
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P30HZ, //25, 720p120hz
    {((ACTIVE_LINE_720P50 >> 1) - 1) , (ACTIVE_LINE_720P50 - 1)},  //RES_3D_720P25HZ, //26, 720p100hz
    {((ACTIVE_LINE_576P >> 1) - 1)   , (ACTIVE_LINE_576P - 1)},  //RES_3D_576P50HZ, //27, 576p100hz
    {((ACTIVE_LINE_480P >> 1) - 1)   , (ACTIVE_LINE_480P - 1)},  //RES_3D_480P60HZ, //28, 480p120hz
    {((ACTIVE_LINE_3D_1080I >> 1) - 1), (ACTIVE_LINE_3D_1080I - 1)},  //RES_3D_1080I60HZ, //29, 1080i120hz
    {((ACTIVE_LINE_3D_1080I >> 1) - 1), (ACTIVE_LINE_3D_1080I - 1)},  //RES_3D_1080I50HZ, //30, 1080i100hz
    {((ACTIVE_LINE_3D_1080I >> 1) - 1), (ACTIVE_LINE_3D_1080I - 1)},  //RES_3D_1080I30HZ, //31, 1080i120hz
    {((ACTIVE_LINE_3D_1080I >> 1) - 1), (ACTIVE_LINE_3D_1080I - 1)},  //RES_3D_1080I25HZ, //32, 1080i100hz
    {((ACTIVE_LINE_576I >> 1) - 1)   , (ACTIVE_LINE_576I - 1)},  //RES_3D_576I25HZ, //33, 576i100hz
    {((ACTIVE_LINE_480I >> 1) - 1)   , (ACTIVE_LINE_480I - 1)},  //RES_3D_480I30HZ, //34, 480i120hz
    {((ACTIVE_LINE_576I >> 1) - 1)   , (ACTIVE_LINE_576I - 1)},  //RES_3D_576I50HZ, //35, 576i100hz
    {((ACTIVE_LINE_480I >> 1) - 1)   , (ACTIVE_LINE_480I - 1)},  //RES_3D_480I60HZ, //36, 480i120hz
    {((ACTIVE_LINE_480I >> 1) - 1)   , (ACTIVE_LINE_480I - 1)},  //RES_2D_480I60HZ, //37, 480i60hz
    {((ACTIVE_LINE_576I >> 1) - 1)   , (ACTIVE_LINE_576I - 1)},  //RES_2D_576I50HZ, //38, 576i50hz
    {((ACTIVE_LINE_480P >> 1) - 1), (ACTIVE_LINE_480P - 1)},  //RES_2D_640x480HZ,//39
    {((ACTIVE_LINE_1080P24 >> 1) - 1), (ACTIVE_LINE_1080P24 - 1)},  //RES_PANEL_AUO_B089AW01, //Total: 1344x625, Act: 1024x600, Frm: 60Hz, Clk: 50.4MHz    
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)}, //RES_3D_720P60HZ_TB,  //41

    {((ACTIVE_LINE_720P50 >> 1) - 1) , (ACTIVE_LINE_720P50 - 1)}, //RES_3D_720P50HZ_TB,  //42
    {((ACTIVE_LINE_1080I60 >> 1) - 1), (ACTIVE_LINE_1080I60 - 1)}, //RES_3D_1080I60HZ_SBS_HALF,//43
    {((ACTIVE_LINE_1080I50 >> 1) - 1), (ACTIVE_LINE_1080I50 - 1)}, //RES_3D_1080I50HZ_SBS_HALF,//44
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P23HZ_TB, //45
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P24HZ_TB,//46
    {((ACTIVE_LINE_4K_2K >> 1) - 1), (ACTIVE_LINE_4K_2K - 1)}, //RES_4K2K23976HZ, //47
    {((ACTIVE_LINE_4K_2K >> 1) - 1), (ACTIVE_LINE_4K_2K - 1)}, //RES_4K2K24HZ, //48
        {((ACTIVE_LINE_4K_2K >> 1) - 1), (ACTIVE_LINE_4K_2K - 1)}, //RES_4K2K23976HZ, //47
    {((ACTIVE_LINE_4K_2K >> 1) - 1), (ACTIVE_LINE_4K_2K - 1)}, //RES_4K2K24HZ, //48
    {((ACTIVE_LINE_4K_2K >> 1) - 1), (ACTIVE_LINE_4K_2K - 1)}, //RES_2160P,//49
    {((ACTIVE_LINE_4K_2K >> 1) - 1), (ACTIVE_LINE_4K_2K- 1)}, //RES_2160P_4096, //50
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_720P30HZ, // 51
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_720P25HZ, // 52
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_720P24HZ, // 53
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_720P23HZ, // 54
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P60HZ,// 55
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P50HZ,//56
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P30HZ,//57
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P29HZ,//58
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P25HZ,//59
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P24HZ, //60
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P23HZ, //61
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P60HZ_TB, //62
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P50HZ_TB, //63
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P30HZ_TB, //64
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P29HZ_TB,//65
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P25HZ_TB, //66
    {((ACTIVE_LINE_1080I60 >> 1) - 1), (ACTIVE_LINE_1080I60 - 1)}, //RES_3D_1080I60HZ_TB, //67
    {((ACTIVE_LINE_1080I60 >> 1) - 1), (ACTIVE_LINE_1080I60 - 1)}, //RES_3D_1080I50HZ_TB,//68
    {((ACTIVE_LINE_1080I60 >> 1) - 1), (ACTIVE_LINE_1080I60 - 1)}, //RES_3D_1080I30HZ_TB,//69
    {((ACTIVE_LINE_1080I60 >> 1) - 1), (ACTIVE_LINE_1080I60 - 1)}, //RES_3D_1080I25HZ_TB,//70
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P30HZ_TB,//71
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P25HZ_TB,//72
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P24HZ_TB,//73
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P23HZ_TB,//74
    {((ACTIVE_LINE_576P >> 1) - 1)   , (ACTIVE_LINE_576P - 1)}, //RES_3D_576P50HZ_TB,//75
    {((ACTIVE_LINE_576I >> 1) - 1)   , (ACTIVE_LINE_576I - 1)}, //RES_3D_576I25HZ_TB,//76
    {((ACTIVE_LINE_576I >> 1) - 1)   , (ACTIVE_LINE_576I - 1)}, //RES_3D_576I50HZ_TB,//77
    {((ACTIVE_LINE_480P >> 1) - 1)   , (ACTIVE_LINE_480P - 1)}, //RES_3D_480P60HZ_TB,//78
    {((ACTIVE_LINE_480I >> 1) - 1)   , (ACTIVE_LINE_480I - 1)}, //RES_3D_480I30HZ_TB,//79
    {((ACTIVE_LINE_480I >> 1) - 1)   , (ACTIVE_LINE_480I - 1)}, //RES_3D_480I60HZ_TB,//80
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P60HZ_SBS_HALF,//81
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P50HZ_SBS_HALF,//82
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P30HZ_SBS_HALF,//83
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P29HZ_SBS_HALF,//84
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P25HZ_SBS_HALF,//85
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P24HZ_SBS_HALF,//86
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080P23HZ_SBS_HALF,//87
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080I30HZ_SBS_HALF,//88
    {((ACTIVE_LINE_1080P60 >> 1) - 1), (ACTIVE_LINE_1080P60 - 1)}, //RES_3D_1080I25HZ_SBS_HALF,//89
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P60HZ_SBS_HALF,//90
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P50HZ_SBS_HALF,//91
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P30HZ_SBS_HALF,//92
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P25HZ_SBS_HALF,//93
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P24HZ_SBS_HALF,//94
    {((ACTIVE_LINE_720P60 >> 1) - 1) , (ACTIVE_LINE_720P60 - 1)},  //RES_3D_720P23HZ_SBS_HALF,//95
    {((ACTIVE_LINE_576P >> 1) - 1)   , (ACTIVE_LINE_576P - 1)}, //RES_3D_576P50HZ_SBS_HALF,//96
    {((ACTIVE_LINE_576I >> 1) - 1)   , (ACTIVE_LINE_576I - 1)}, //RES_3D_576I25HZ_SBS_HALF,//97
    {((ACTIVE_LINE_576I >> 1) - 1)   , (ACTIVE_LINE_576I - 1)}, //RES_3D_576I50HZ_SBS_HALF,//98
    {((ACTIVE_LINE_480P >> 1) - 1)   , (ACTIVE_LINE_480P - 1)}, //RES_3D_480P60HZ_SBS_HALF,//99
    {((ACTIVE_LINE_480I >> 1) - 1)   , (ACTIVE_LINE_480I - 1)}, //RES_3D_480I30HZ_SBS_HALF,//100
    {((ACTIVE_LINE_480I >> 1) - 1)   , (ACTIVE_LINE_480I - 1)} //RES_3D_480I60HZ_SBS_HALF,//101     
};

const UINT16 _u2aHTotalPixel[][2] = 
{   // CCIR601, CCIR656
	{(TOTAL_PIXEL_480I - 1), (ACTIVE_PIXEL_480I << 1)}, //RES_480I=0,                           
	{(TOTAL_PIXEL_576I - 1), (ACTIVE_PIXEL_576I << 1)}, //RES_576I, //1                         
	{(TOTAL_PIXEL_480P - 1), ACTIVE_PIXEL_480P}, //RES_480P, //2                         
	{(TOTAL_PIXEL_576P - 1), ACTIVE_PIXEL_576P}, //RES_576P, //3                         
	{(TOTAL_PIXEL_480P - 1), ACTIVE_PIXEL_480P}, //RES_480P_1440,//4                     
	{(TOTAL_PIXEL_576P - 1), ACTIVE_PIXEL_576P}, //RES_576P_1440,//5                     
	{(TOTAL_PIXEL_480P - 1), ACTIVE_PIXEL_480P}, //RES_480P_2880,//6                     
	{(TOTAL_PIXEL_576P - 1), ACTIVE_PIXEL_576P}, //RES_576P_2880,//7                     
	{(TOTAL_PIXEL_720P60 - 1), ACTIVE_PIXEL_720P60}, //RES_720P60HZ,//8                      
	{(TOTAL_PIXEL_720P50 - 1), ACTIVE_PIXEL_720P50}, //RES_720P50HZ,//9                      
	{(TOTAL_PIXEL_1080I60 - 1), ACTIVE_PIXEL_1080I60}, //RES_1080I60HZ,//10                    
	{(TOTAL_PIXEL_1080I50 - 1), ACTIVE_PIXEL_1080I50}, //RES_1080I50HZ,//11                    
	{(TOTAL_PIXEL_1080P60 - 1), ACTIVE_PIXEL_1080P60}, //RES_1080P60HZ,//12                    
	{(TOTAL_PIXEL_1080P50 - 1), ACTIVE_PIXEL_1080P50}, //RES_1080P50HZ,//13                    
	{(TOTAL_PIXEL_1080P30 - 1), ACTIVE_PIXEL_1080P60}, //RES_1080P30HZ,//14                    
	{(TOTAL_PIXEL_1080P25 - 1), ACTIVE_PIXEL_1080P60}, //RES_1080P25HZ, //15                   
	{((TOTAL_PIXEL_480I << 1) - 1), (ACTIVE_PIXEL_480I << 2)}, //RES_480I_2880,//16                    
	{((TOTAL_PIXEL_576I << 1) - 1), (ACTIVE_PIXEL_576I << 2)}, //RES_576I_2880,//17                    
	{(TOTAL_PIXEL_1080P24 - 1), ACTIVE_PIXEL_1080P24}, //RES_1080P24HZ, //18                   
	{(TOTAL_PIXEL_1080P24 - 1), ACTIVE_PIXEL_1080P24}, //RES_1080P23_976HZ, //19, 1080P23.976hz
	{(TOTAL_PIXEL_1080P24 - 1), ACTIVE_PIXEL_1080P24}, //RES_1080P29_97HZ, //20, 1080P29.97hz  
    {(TOTAL_PIXEL_1080P24 - 1), ACTIVE_PIXEL_1080P24},  //RES_3D_1080P23HZ, //21, 1080p47.952Hz
    {(TOTAL_PIXEL_1080P24 - 1), ACTIVE_PIXEL_1080P24},  //RES_3D_1080P24HZ, //22, 1080p48hz
    {(TOTAL_PIXEL_720P60 - 1), ACTIVE_PIXEL_720P60},  //RES_3D_720P60HZ, //23, 720p120hz
    {(TOTAL_PIXEL_720P50 - 1), ACTIVE_PIXEL_720P50},  //RES_3D_720P50HZ, //24, 720p100hz
    {(TOTAL_PIXEL_720P60 - 1), ACTIVE_PIXEL_720P60},  //RES_3D_720P30HZ, //25, 720p120hz
    {(TOTAL_PIXEL_720P50 - 1), ACTIVE_PIXEL_720P50},  //RES_3D_720P25HZ, //26, 720p100hz
    {(TOTAL_PIXEL_576P - 1), ACTIVE_PIXEL_576P},  //RES_3D_576P50HZ, //27, 576p100hz
    {(TOTAL_PIXEL_480P - 1), ACTIVE_PIXEL_480P},  //RES_3D_480P60HZ, //28, 480p120hz
    {(TOTAL_PIXEL_1080I60 - 1), ACTIVE_PIXEL_1080I60},  //RES_3D_1080I60HZ, //29, 1080i120hz
    {(TOTAL_PIXEL_1080I50 - 1), ACTIVE_PIXEL_1080I50},  //RES_3D_1080I50HZ, //30, 1080i100hz
    {(TOTAL_PIXEL_1080I60 - 1), ACTIVE_PIXEL_1080I60},  //RES_3D_1080I30HZ, //31, 1080i120hz
    {(TOTAL_PIXEL_1080I50 - 1), ACTIVE_PIXEL_1080I50},  //RES_3D_1080I25HZ, //32, 1080i100hz
    {(TOTAL_PIXEL_576I - 1), ACTIVE_PIXEL_576I},  //RES_3D_576I25HZ, //33, 576i100hz
    {(TOTAL_PIXEL_480I - 1), ACTIVE_PIXEL_480I},  //RES_3D_480I30HZ, //34, 480i120hz
    {(TOTAL_PIXEL_576I - 1), ACTIVE_PIXEL_576I},  //RES_3D_576I50HZ, //35, 576i100hz
    {(TOTAL_PIXEL_480I - 1), ACTIVE_PIXEL_480I},  //RES_3D_480I60HZ, //36, 480i120hz
    {(TOTAL_PIXEL_480I - 1), ACTIVE_PIXEL_480I},  //RES_2D_480I60HZ, //37, 480i60hz
    {(TOTAL_PIXEL_576I - 1), ACTIVE_PIXEL_576I},  //RES_2D_576I50HZ, //38, 576i50hz
    {(800 - 1), 640},  //RES_2D_640x480HZ,//39
    {(1344 - 1), 1024},  //RES_PANEL_AUO_B089AW01, //Total: 1344x625, Act: 1024x600, Frm: 60Hz, Clk: 50.4MHz    
    {(TOTAL_PIXEL_720P60 - 1), ACTIVE_PIXEL_720P60}, //RES_3D_720P60HZ_TB,  //41
    {(TOTAL_PIXEL_720P50 - 1), ACTIVE_PIXEL_720P50}, //RES_3D_720P50HZ_TB,  //42
    {(TOTAL_PIXEL_1080I60 - 1), ACTIVE_PIXEL_1080I60}, //RES_3D_1080I60HZ_SBS_HALF,//43
    {(TOTAL_PIXEL_1080I50 - 1), ACTIVE_PIXEL_1080I50}, //RES_3D_1080I50HZ_SBS_HALF,//44
    {(TOTAL_PIXEL_1080P24 - 1), ACTIVE_PIXEL_1080P24},  //RES_3D_1080P23HZ_TB, //45
    {(TOTAL_PIXEL_1080P24 - 1), ACTIVE_PIXEL_1080P24},  //RES_3D_1080P24HZ_TB,//46
    {(5500 - 1), 3840},  //RES_4K2K23976HZ, //47
    {(5500 - 1), 3840},  //RES_4K2K24HZ, //48
       {(5500 - 1), 3840},  //RES_4K2K23976HZ, //47
    {(5500 - 1), 3840},  //RES_4K2K24HZ, //48
    {(4400 - 1), 3840},  //RES_2160P,//49
    {(5500 - 1), 4096},  //RES_2160P_4096, //50
    {(TOTAL_PIXEL_720P30 - 1), ACTIVE_PIXEL_720P30},  //RES_720P30HZ, // 51
    {(TOTAL_PIXEL_720P25 - 1), ACTIVE_PIXEL_720P25},  //RES_720P25HZ, // 52
    {(TOTAL_PIXEL_720P24 - 1), ACTIVE_PIXEL_720P24},  //RES_720P24HZ, // 53
    {(TOTAL_PIXEL_720P24 - 1), ACTIVE_PIXEL_720P24},  //RES_720P23HZ, // 54
    {(TOTAL_PIXEL_1080P60 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P60HZ,// 55
    {(TOTAL_PIXEL_1080P50 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P50HZ,//56
    {(TOTAL_PIXEL_1080P30 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P30HZ,//57
    {(TOTAL_PIXEL_1080P30 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P29HZ,//58
    {(TOTAL_PIXEL_1080P25 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P25HZ,//59
    {(TOTAL_PIXEL_720P24 - 1), ACTIVE_PIXEL_720P24},  //RES_3D_720P24HZ, //60
    {(TOTAL_PIXEL_720P24 - 1), ACTIVE_PIXEL_720P24},  //RES_3D_720P23HZ, //61
    {(TOTAL_PIXEL_1080P60 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P60HZ_TB, //62
    {(TOTAL_PIXEL_1080P50 - 1), ACTIVE_PIXEL_1080P50}, //RES_3D_1080P50HZ_TB, //63
    {(TOTAL_PIXEL_1080P30 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P30HZ_TB, //64
    {(TOTAL_PIXEL_1080P30 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P29HZ_TB,//65
    {(TOTAL_PIXEL_1080P25 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P25HZ_TB, //66
    {(TOTAL_PIXEL_1080I60 - 1), ACTIVE_PIXEL_1080I60}, //RES_3D_1080I60HZ_TB, //67
    {(TOTAL_PIXEL_1080I50 - 1), ACTIVE_PIXEL_1080I50}, //RES_3D_1080I50HZ_TB,//68
    {(TOTAL_PIXEL_1080I60 - 1), ACTIVE_PIXEL_1080I60}, //RES_3D_1080I30HZ_TB,//69
    {(TOTAL_PIXEL_1080I50 - 1), ACTIVE_PIXEL_1080I50}, //RES_3D_1080I25HZ_TB,//70
    {(TOTAL_PIXEL_720P30 - 1), ACTIVE_PIXEL_720P60}, //RES_3D_720P30HZ_TB,//71
    {(TOTAL_PIXEL_720P25 - 1), ACTIVE_PIXEL_720P60}, //RES_3D_720P25HZ_TB,//72
    {(TOTAL_PIXEL_720P24 - 1), ACTIVE_PIXEL_720P60}, //RES_3D_720P24HZ_TB,//73
    {(TOTAL_PIXEL_720P24 - 1), ACTIVE_PIXEL_720P60}, //RES_3D_720P23HZ_TB,//74
    {(TOTAL_PIXEL_576P - 1), (ACTIVE_PIXEL_576P << 1)}, //RES_3D_576P50HZ_TB,//75
    {(TOTAL_PIXEL_576I - 1), (ACTIVE_PIXEL_576I << 1)}, //RES_3D_576I25HZ_TB,//76
    {(TOTAL_PIXEL_576I - 1), (ACTIVE_PIXEL_576I << 1)}, //RES_3D_576I50HZ_TB,//77
    {(TOTAL_PIXEL_480P - 1), (ACTIVE_PIXEL_480P << 1)}, //RES_3D_480P60HZ_TB,//78
    {(TOTAL_PIXEL_480I - 1), (ACTIVE_PIXEL_480I << 1)}, //RES_3D_480I30HZ_TB,//79
    {(TOTAL_PIXEL_480I - 1), (ACTIVE_PIXEL_480I << 1)}, //RES_3D_480I60HZ_TB,//80
    {(TOTAL_PIXEL_1080P60 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P60HZ_SBS_HALF,//81
    {(TOTAL_PIXEL_1080P50 - 1), ACTIVE_PIXEL_1080P50}, //RES_3D_1080P50HZ_SBS_HALF,//82
    {(TOTAL_PIXEL_1080P30 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P30HZ_SBS_HALF,//83
    {(TOTAL_PIXEL_1080P30 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P29HZ_SBS_HALF,//84
    {(TOTAL_PIXEL_1080P25 - 1), ACTIVE_PIXEL_1080P60}, //RES_3D_1080P25HZ_SBS_HALF,//85
    {(TOTAL_PIXEL_1080P24 - 1), ACTIVE_PIXEL_1080P24},  //RES_3D_1080P24HZ_SBS_HALF,//86
    {(TOTAL_PIXEL_1080P24 - 1), ACTIVE_PIXEL_1080P24},  //RES_3D_1080P23HZ_SBS_HALF,//87
    {(TOTAL_PIXEL_1080I60 - 1), ACTIVE_PIXEL_1080I60}, ////RES_3D_1080I30HZ_SBS_HALF,//88
    {(TOTAL_PIXEL_1080I50 - 1), ACTIVE_PIXEL_1080I50}, ////RES_3D_1080I25HZ_SBS_HALF,//89
    {(TOTAL_PIXEL_720P60 - 1), ACTIVE_PIXEL_720P60}, //RES_3D_720P60HZ_SBS_HALF,//90
    {(TOTAL_PIXEL_720P50 - 1), ACTIVE_PIXEL_720P50}, //RES_3D_720P50HZ_SBS_HALF,//91
    {(TOTAL_PIXEL_720P30 - 1), ACTIVE_PIXEL_720P30}, //RES_3D_720P30HZ_SBS_HALF,//92
    {(TOTAL_PIXEL_720P25 - 1), ACTIVE_PIXEL_720P25}, //RES_3D_720P25HZ_SBS_HALF,//93
    {(TOTAL_PIXEL_720P24 - 1), ACTIVE_PIXEL_720P24}, //RES_3D_720P24HZ_SBS_HALF,//94
    {(TOTAL_PIXEL_720P24 - 1), ACTIVE_PIXEL_720P24}, //RES_3D_720P23HZ_SBS_HALF,//95
    {(TOTAL_PIXEL_576P - 1), (ACTIVE_PIXEL_576P << 1)}, //RES_3D_576P50HZ_SBS_HALF,//96
    {(TOTAL_PIXEL_576I - 1), (ACTIVE_PIXEL_576I << 1)}, //RES_3D_576I25HZ_SBS_HALF,//97
    {(TOTAL_PIXEL_576I - 1), (ACTIVE_PIXEL_576I << 1)}, //RES_3D_576I50HZ_SBS_HALF,//98
    {(TOTAL_PIXEL_480P - 1), (ACTIVE_PIXEL_480P << 1)}, //RES_3D_480P60HZ_SBS_HALF,//99
    {(TOTAL_PIXEL_480I - 1), (ACTIVE_PIXEL_480I << 1)}, //RES_3D_480I30HZ_SBS_HALF,//100
    {(TOTAL_PIXEL_480I - 1), (ACTIVE_PIXEL_480I << 1)},//RES_3D_480I60HZ_SBS_HALF,//101
    {(TOTAL_PIXEL_2160P24 - 1), (ACTIVE_PIXEL_2160P24 << 1)},//RES_2160P_24HZ,//102
    {(TOTAL_PIXEL_2160P24 - 1), (TOTAL_PIXEL_2160P24 << 1)},//RES_2160P_23976HZ,//103
    {(TOTAL_PIXEL_2160P50 - 1), (ACTIVE_PIXEL_2160P50 << 1)},//RES_2160P_50HZ,//104
    {(TOTAL_PIXEL_2160P60 - 1), (ACTIVE_PIXEL_2160P60 << 1)},//RES_2160P_60HZ,//105
    {(TOTAL_PIXEL_2161P50 - 1), (ACTIVE_PIXEL_2161P50 << 1)},//RES_2161P_50HZ,//106
    {(TOTAL_PIXEL_2161P60 - 1), (ACTIVE_PIXEL_2161P60 << 1)},//RES_2161P_60HZ,//107
};



void vHal_VinSetEnable(BOOL fgEnable)
{
	UINT32 u4Reg;
	
	printk("[enter %s]fgEnable = %d\n",__FUNCTION__,fgEnable);
	vWriteVINMsk(RW_VDI_DATA,((1<<31)|(1<<30)|(1<<28)),((1<<31)|(1<<30)|(1<<28)));
    vWriteVINMsk(RW_VDI_ENA, 0,VI_EN); //data disable   
    //vWriteVINMsk(RW_VDI_DATA,SW_RST ,SW_RST);
	vHal_VinEnableDramIf(FALSE); 
    if (fgEnable)
    {
		vWriteVINMsk(RW_VDI_ENA, VI_EN,VI_EN); //data disable	
        //Un-Reset Vin Module
		vWriteVINMsk(RW_VDI_DATA,0,((1<<31)|(1<<30)|(1<<28)));
    }
	
	u4Reg =bReadRegVIN(RW_VDI_ENA);
	 printk("[VDOIN] u4Reg = 0x%x\n",u4Reg);
}

void vHal_VinEnableDramIf(BOOL fgEnable)
{
    if(fgEnable)
    {
        vWriteVINMsk(RW_VDI_ENA, 0,FIELD0_DIS|FIELD1_DIS);
    }
    else
    {
        vWriteVINMsk(RW_VDI_ENA, FIELD0_DIS|FIELD1_DIS,FIELD0_DIS|FIELD1_DIS);
    }
}


void vHal_VinSetDramMode(unsigned char ucFmtMode,unsigned char ucAddrMode, unsigned char ucSwap)
{
		UINT32 u4Reg;
		
		vWriteVINMsk(RW_VDI_ENA,SRAM_EN_SEL,SRAM_EN_SEL);
		u4Reg = bReadRegVIN(RW_VDI_ENA);
		
        u4Reg |= ((UINT32)ucAddrMode << 14); // line  or block
        u4Reg |= ((UINT32)ucSwap << 23); // swap
        u4Reg |= ((UINT32)ucFmtMode << 25); // 4:2:0  or 4:2:2
		vWriteRegVIN(RW_VDI_ENA, u4Reg);
		
		u4Reg = bReadRegVIN(RW_VDI_ENA);
		printk("[VDOIN] u4Reg = 0x%x; ucFmtMode = %d\n",u4Reg, ucFmtMode);	
		
		vWriteVINMsk(RW_VDI_MODE,0,VIN_FIFO_THRES);
		
        vWriteVINMsk(RW_VDI_MODE,VIN_FIFO_THRES_1,VIN_FIFO_THRES);

}

void vHal_VinSetDramIf(unsigned char ucRes,unsigned ucMode)
{
    UINT32 u4YLine;
    UINT32 u4HCnt;
    UINT32 u4HActCnt;

    if((ucRes >= RES_MODE_NUM) || (ucMode > FMT_601_MODE) || (ucMode == FMT_INVALID))
    {
        return;
    }
	
    printk("[VDOIN] ucRes = %d\n",ucRes);
    u4YLine = _u2aYCLine[ucRes][1];
    u4HCnt = _u2aHTotalPixel[ucRes][ucMode-1];
    u4HActCnt = _u2aHTotalPixel[ucRes][1]; 
    printk("[VDOIN] u4YLine = %d,u4HCnt = %d,u4HActCnt = %d\n",u4YLine,u4HCnt,u4HActCnt);
        
    vWriteRegVIN(RW_VDI_ACTLINE, u4YLine | 0x00004000);
    vWriteRegVIN(RW_VDI_HCREG1, (u4HActCnt << 16) | u4HCnt);
}

void vHal_VinSetPara(unsigned char ucRes, unsigned char ucOutputcolorFmt, unsigned char ucMode,unsigned char ucInputBitMode,bool fgVgaCea)
{
	UINT32 u4Reg;
	UINT32 u4HCnt = 0;
	UINT32 u4YLine = 0;
	UINT32 u4CLine = 0;
    UINT32 u4Total, u4VPosH, u4Data;
	
	if((ucRes >= RES_MODE_NUM) || (ucInputBitMode == NON_USED) ||(ucInputBitMode > YC444_36BIT) ||(ucOutputcolorFmt > 1))
	{
	    printk("[VDOIN] Error paramenters!\n");
	    return;
	}
	printk("[VDOIN] ucRes = %d,ucOutputcolorFmt = %d,ucMode = %d,ucInputBitMode = %d\n",ucRes,ucOutputcolorFmt,ucMode,ucInputBitMode);
	
	u4Reg =bReadRegVIN(RW_VDI_ENA);
	printk("[VDOIN] u4Reg = 0x%x,L%d\n",u4Reg,__LINE__);
	 
	u4Reg = bReadRegVIN(RW_VDI_ENA) & ~(0x03 << 2);
    
	vWriteVINMsk(RW_VDI_ENA,VIDEO_FMT,VIDEO_FMT); // MT8590 only have 601 mode ,separate mode
	
	if(fgIsProgress(ucRes))
	{
		vWriteVINMsk(RW_VDI_ENA,VIN_PROGRESSIVE,VIN_PROGRESSIVE); 
		u4Reg =bReadRegVIN(RW_VDI_ENA);
		printk("[VDOIN] u4Reg = 0x%x,L%d\n",u4Reg,__LINE__);
	}
	else
	{
		vWriteVINMsk(RW_VDI_ENA,0,VIN_PROGRESSIVE); 
	}
	
	
	if(fgIs2FsVideo(ucRes)) 
		vWriteVINMsk(RW_VDI_ENA,SD_2FS_INPUT,SD_2FS_INPUT);
	else
		vWriteVINMsk(RW_VDI_ENA,0,SD_2FS_INPUT);

	if(!fgIsProgress(ucRes) && !fgIsSDInterlace(ucRes))
	{
		vWriteVINMsk(RW_VDI_ENA,FLD_INV_EN,FLD_INV_EN);
	}

	// different mode for Y AND C line when 420 && 422  for vdoin output
	u4YLine = _u2aYCLine[ucRes][1];
	u4CLine = _u2aYCLine[ucRes][ucOutputcolorFmt];
	vWriteRegVIN(RW_VDI_DW_NEED, (u4YLine) | (u4CLine) << 16);
	
    // cnt active pixel /16
	u4HCnt = _u2aHDramSize[ucRes];
	u4Reg = bReadRegVIN(RW_VDI_HCREG2) & ~0x03FFFFFF;
	u4Reg |= (u4HCnt  -1)<< 16;  // H CHCNT
	u4Reg |= (u4HCnt - 1) << 0;  // HYCNT
	vWriteRegVIN(RW_VDI_HCREG2, u4Reg);
	
	u4Reg = bReadRegVIN(RW_VDI_VSCALE) & 0xFC00FFFF;
	u4Reg |= u4HCnt << 16;
	vWriteRegVIN(RW_VDI_VSCALE, u4Reg);
	u4Reg = bReadRegVIN(RW_VDI_VSCALE);
	printk("[VDOIN] test0000  u4Reg = 0x%x \n",u4Reg);
	

	u4Reg = bReadRegVIN(RW_VDI_HPCNT) & ~0xFFFFFFFF;
	u4Reg |= _u2aHDelay[ucRes];
	vWriteRegVIN(RW_VDI_HPCNT, u4Reg);

	u4Reg = bReadRegVIN(RW_VDI_VPCNT) & ~0xFFFFFFFF;
	u4Reg |= _u2aVDelay[ucRes][0];
	u4Reg |= _u2aVDelay[ucRes][1] << 16;
	if((ucRes == RES_2D_640x480HZ)&& (!fgVgaCea))
	{
		u4Reg -= 0x00080008; //0x001B001B
	}
	vWriteRegVIN(RW_VDI_VPCNT, u4Reg);

	vWriteRegVIN(RW_VDI_INPUT_CTRL,0);
	vWriteVINMsk(RW_VDI_INPUT_CTRL,((1<<28)|(1<<29)),((1<<28)|(1<<29)));
	u4Reg = ((fgIsYCbCr444(ucInputBitMode)) ? (0x24) : (0x18)); 
	vWriteRegVIN(RW_VDI_INPUT_CTRL,u4Reg);
	
	if((ucRes == RES_576I) ||(ucRes == RES_2D_576I50HZ))
		vWriteVINMsk(RW_VDI_INPUT_CTRL,(1<<13),(1<<13));
	else
		vWriteVINMsk(RW_VDI_INPUT_CTRL,(1<<12),(1<<12));

	if(!fgIsHDRes(ucRes))
	{
		vWriteVINMsk(RW_VDI_INPUT_CTRL,((1<<15)|(1<<16)),((1<<15)|(1<<16)|(1<<14)));
	}
	else
		vWriteVINMsk(RW_VDI_INPUT_CTRL,(1<<14),((1<<15)|(1<<16)|(1<<14)));

	if(fgIsYCbCr444(ucInputBitMode)) 
		vWriteVINMsk(RW_VDI_INPUT_CTRL,(1<<9)|(1<<11),(1<<9)|(1<<11));
	else
		vWriteVINMsk(RW_VDI_INPUT_CTRL,0,((1<<9)|(1<<11)));
	
	if(((fgIsYCbCr422(ucInputBitMode))&&(!fgIsHDRes(ucRes))&&fgIsSDInterlace(ucRes)))
	{
		vWriteVINMsk(RW_VDI_INPUT_CTRL,(1<<21),(1<<21));
	}
	else
	{
		vWriteVINMsk(RW_VDI_INPUT_CTRL,0,(1<<21));
	}
	if( fgIs4FsVideo(ucRes))
	{
		vWriteVINMsk(RW_VDI_INPUT_CTRL,VIN_SD_4FS_OPT,VIN_SD_4FS_OPT);
	}
	else
	{
		vWriteVINMsk(RW_VDI_INPUT_CTRL,0,VIN_SD_4FS_OPT);
	}

	u4Reg = (fgIsYCbCr444(ucInputBitMode) && fgIs2FsVideo(ucRes)) ? (vWriteVINMsk(RW_VDI_INPUT_CTRL,(1<<30),(1<<30))) : (vWriteVINMsk(RW_VDI_INPUT_CTRL,0,(1<<30)));
	vWriteRegVIN(RW_VDI_INPUT_CTRL,u4Reg);
	
	if(fgIs3DFPOutput(ucRes)) 
	{
		vWriteVINMsk(RW_VDI_INPUT_CTRL,VIN_3D_WRAP,VIN_3D_WRAP);
	}
	else
	{
		vWriteVINMsk(RW_VDI_INPUT_CTRL,0,VIN_3D_WRAP);
	}
	//source input config
	switch(ucInputBitMode) 
	{
		case YCMIX_8BIT:
		case YC422_16BIT:
		case YC444_24BIT: 
		default:    
		break;

		case YCMIX_10BIT:
		case YC422_20BIT:
		case YC444_30BIT: 
			vWriteVINMsk(RW_VDI_INPUT_CTRL,VIN_10BIT_BIT,VIN_10BIT_BIT);
		break;

		case YCMIX_12BIT:
		case YC422_24BIT:
		case YC444_36BIT: 
			vWriteVINMsk(RW_VDI_INPUT_CTRL,VIN_12BIT_BIT,VIN_12BIT_BIT);
		break;                
	}
	
    u4Data = bReadRegVIN(RW_VDI_DATA);
    switch(ucRes)
	{
		case RES_3D_1080P23HZ:
		case RES_3D_1080P24HZ:
			u4Total = (TOTAL_PIXEL_1080P24 << 16) | (TOTAL_LINE_1080P24 << 1);
			u4VPosH = ((TOTAL_LINE_1080P24 << 1) << 16) | 0xEF;
			u4Data = 0x0320000A;
		break;

		case RES_3D_1080P25HZ:
			u4Total = (TOTAL_PIXEL_1080P25 << 16) | (TOTAL_LINE_1080P24 << 1);
			u4VPosH = ((TOTAL_LINE_1080P24 << 1) << 16) | 0xEF;
			u4Data = 0x0320000A;
		break;

		case RES_3D_1080P30HZ:
		case RES_3D_1080P29HZ:
			u4Total = (TOTAL_PIXEL_1080P30 << 16) | (TOTAL_LINE_1080P24<< 1);
			u4VPosH = ((TOTAL_LINE_1080P24 << 1) << 16) | 0xEF;
			u4Data = 0x0320000A;
		break;

		case RES_3D_1080I60HZ:
			u4Total = (TOTAL_PIXEL_1080I60<< 16) | (TOTAL_LINE_1080P60 << 1);
			u4VPosH = ((TOTAL_LINE_1080P60 << 1) << 16) | 0xEF;
			u4Data = 0x0320000A;
		break;

		case RES_3D_1080I50HZ:
			u4Total = (TOTAL_PIXEL_1080I50<< 16) | (TOTAL_LINE_1080P50 << 1);
			u4VPosH = ((TOTAL_LINE_1080P50 << 1) << 16) | 0xEF;
			u4Data = 0x0320000A;
		break;

		case RES_3D_720P60HZ:
			u4Total = (TOTAL_PIXEL_720P60 << 16) | (TOTAL_LINE_720P60 << 1);
			u4VPosH = ((TOTAL_LINE_720P60 << 1) << 16) | 0xEF;
			u4Data = 0x0320000A;
		break;

		case RES_3D_720P50HZ:
			u4Total = (TOTAL_PIXEL_720P50 << 16) | (TOTAL_LINE_720P50 << 1);
			u4VPosH = ((TOTAL_LINE_720P50 << 1) << 16) | 0xEF;
			u4Data = 0x0320000A;
		break;     

		case RES_3D_720P30HZ:
			u4Total = (TOTAL_PIXEL_720P30 << 16) | (TOTAL_LINE_720P50 << 1);
			u4VPosH = ((TOTAL_LINE_720P50 << 1) << 16) | 0xEF;
			u4Data = 0x0320000A;
		break;     

		case RES_3D_720P25HZ:
			u4Total = (TOTAL_PIXEL_720P25 << 16) | (TOTAL_LINE_720P50 << 1);
			u4VPosH = ((TOTAL_LINE_720P50 << 1) << 16) | 0xEF;
			u4Data = 0x0320000A;
		break;     

		case RES_3D_720P24HZ:
		case RES_3D_720P23HZ:
			u4Total = (TOTAL_PIXEL_720P24 << 16) | (TOTAL_LINE_720P50 << 1);
			u4VPosH = ((TOTAL_LINE_720P50 << 1) << 16) | 0xEF;
			u4Data = 0x0320000A;
		break;     

		default:
			u4Total = 0x00070007;
			u4VPosH = 0x00ef00ef;
		break;
	}
	vWriteRegVIN(RW_VDI_3D_TOTAL, u4Total);
	vWriteRegVIN(RW_VDI_3D_VPOS_H, u4VPosH);
	vWriteRegVIN(RW_VDI_DATA, u4Data);
	//FPGA
	vWriteRegVIN(RW_VDI_MODE, 0x30328428);
	vWriteRegVIN(RW_VDI_HBCNT, 0x280);

	u4Reg = bReadRegVIN(RW_VDI_VSCALE)&0xFFFF0000;
	u4Reg |= 0x00001043;
	vWriteRegVIN(RW_VDI_VSCALE, u4Reg);
    
	u4Reg =bReadRegVIN(RW_VDI_ENA);
	printk("[VDOIN] u4Reg = 0x%x,L%d\n",u4Reg,__LINE__);
	vHal_VinSetDramIf(ucRes,ucMode);
	
	u4Reg =bReadRegVIN(RW_VDI_ENA);
	printk("[VDOIN] u4Reg = 0x%x,L%d\n",u4Reg,__LINE__);
	
}

BOOL fgHal_VinIs3DLSight(void)
{
    UINT32 u4Reg = bReadRegVIN(RW_VDI_HSCALE) & 0xFFF;

    if(u4Reg < ((bReadRegVIN(RW_VDI_3D_VPOS_H) & 0xFFF0000) >> 17))
    {
        return TRUE;
    }
    else
    {
        return FALSE;
    }
}

UINT8 u1Hal_Vin3DFieldCnt(void)
{
    UINT32 u4Reg = bReadRegVIN(RW_VDI_HSCALE) & 0xFFF;

    if(u4Reg < 23)
    {
        return 1;
    }
    else if(u4Reg < 585)
    {
        return 2;
    }
    else if(u4Reg < 1149)
    {
        return 3;
    }
    else if(u4Reg < 1710)
    {
        return 4;
    }    
    else
    {
       return 0;
    }
}

BOOL fgHal_VinIsTopField(void)
{
    UINT32 u4Reg = bReadRegVIN(RO_VDI_DBG1);

    if(u4Reg & BLV_FIELD)
    {
        return FALSE;
    }
    else
    {
        return TRUE;
    }
}

void vhal_vin_clk_enable(BOOL fgEnable)
{
	int ret = 0;
	
    if(fgEnable)
	{
		//ret += enable_clock(MT_CG_WR_CHANNEL_VDI_PXL, "videoin");
		//ret += enable_clock(MT_CG_WR_CHANNEL_VDI_DRAM, "videoin");
		//ret += enable_clock(MT_CG_WR_CHANNEL_BCLK, "videoin");
		vWriteTOPCKMsk(BDP_DISPSYS_CG_CON0,0,HF_WR_CHANNEL_VDI_PIX_CK|HF_WR_CHANNEL_VDI_DRAM_CK|HF_WR_CHANNEL_BCLK_FREE_CLK);
	}
	else
	{
		
		//ret += disable_clock(MT_CG_WR_CHANNEL_VDI_PXL, "videoin");
		//ret += disable_clock(MT_CG_WR_CHANNEL_VDI_DRAM, "videoin");
		//ret += disable_clock(MT_CG_WR_CHANNEL_BCLK, "videoin");
		vWriteTOPCKMsk(BDP_DISPSYS_CG_CON0,HF_WR_CHANNEL_VDI_PIX_CK|HF_WR_CHANNEL_VDI_DRAM_CK|HF_WR_CHANNEL_BCLK_FREE_CLK, HF_WR_CHANNEL_VDI_PIX_CK|HF_WR_CHANNEL_VDI_DRAM_CK|HF_WR_CHANNEL_BCLK_FREE_CLK);
	}
}

void set_rx_to_vdi_clk(void)
{
	vWriteTOPCKMsk(BDP_DISPSYS_DISP_CLK_CONFIG1,0,WR_CH_DI_SEL_TEST_MODE|(1<<5)); 
	vWriteTOPCKMsk(BDP_DISPSYS_CG_CON0,0,HF_WR_CHANNEL_VDI_PIX_CK|HF_WR_CHANNEL_VDI_DRAM_CK|HF_WR_CHANNEL_BCLK_FREE_CLK); 
}

void set_rx_dgi_to_vdi_clk(void)
{
	vWriteTOPCKMsk(BDP_DISPSYS_CG_CON0,DGI_IN_CLK|DGI_OUT_CLK, DGI_IN_CLK|DGI_OUT_CLK);
	vWriteTOPCKMsk(BDP_DISPSYS_DISP_CLK_CONFIG1,(1<<3),(1<<5)|(1<<4)|(1<<3)||(1<<2)||(1<<1)); 
	vWriteTOPCKMsk(BDP_DISPSYS_CG_CON0,0,HF_WR_CHANNEL_VDI_PIX_CK|HF_WR_CHANNEL_VDI_DRAM_CK|HF_WR_CHANNEL_BCLK_FREE_CLK); 
}

void vin_hal_set_src_type(VIDEO_IN_SRC_ID_E esrctype)
{
    vWriteTOPCKMsk(0xC000140,(1<<7)|(1<<23),(1<<7)|(1<<23));
    switch (esrctype) {
    case VIN_EXTERNAL_TVD:
		vWriteTOPCKMsk(BDP_DISPSYS_DISP_CLK_CONFIG1,WR_CH_DI_SEL_TEST_MODE|(1<<5),WR_CH_DI_SEL_TEST_MODE|(1<<5)); 
		vWriteTOPCKMsk(BDP_DISPSYS_CG_CON0,0,HF_WR_CHANNEL_VDI_PIX_CK|HF_WR_CHANNEL_VDI_DRAM_CK|HF_WR_CHANNEL_BCLK_FREE_CLK); 
        break;
    case VIN_HDMI_1:
    case VIN_HDMI_2:
        printk("enter %s\n",__FUNCTION__);
		vWriteTOPCKMsk(BDP_DISPSYS_VIN_CONFIG,0,VIN_SEL);
		vWriteTOPCKMsk(BDP_DISPSYS_DISP_CLK_CONFIG1,0,(1<<2)|(1<<5)); 
		vWriteTOPCKMsk(BDP_DISPSYS_CG_CON0,0,(1<<3)|(1<<4)|(1<<5)); 
        break;
    case VIN_SRC_DGI:
		vWriteTOPCKMsk(BDP_DISPSYS_VIN_CONFIG,VIN_SEL,VIN_SEL);
		vWriteTOPCKMsk(BDP_DISPSYS_DISP_CLK_CONFIG1,(1<<3),(1<<5)|(1<<4)|(1<<3)|(1<<2)|(1<<1)); 
		vWriteTOPCKMsk(BDP_DISPSYS_CG_CON0,0,(1<<3)|(1<<4)|(1<<5)|(1<<6)|(1<<7)|(1<<8)|(1<<9)); //RX--DGI--VIN
        break;
    default:
        break;
	}
}

void vclear_vin_irq(void) 
{
	vWriteTOPCKMsk(0xc000004,(1<<6),(1<<6)); 
	udelay(2);
	vWriteTOPCKMsk(0xc000004,0,(1<<6)); 
}

void vHal_VinSetBufPtr(VIDEO_IN_ADDR* prBuf)
{
	VIDEO_IN_LOG("m4u(prBuf->u4YAddr) = 0x%x,m4u(prBuf->u4CAddr) = 0x%x\n", \
		(prBuf->u4YAddr),(prBuf->u4CAddr));
    vWriteRegVIN(RW_VDI_YADDR0, (prBuf->u4YAddr)>>2);
	vWriteRegVIN(RW_VDI_CADDR0, (prBuf->u4CAddr)>>2);   
}

